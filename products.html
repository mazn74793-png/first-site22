<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>المنتجات</title>
<style>
body{background:#0f2027;color:white;font-family:Arial;padding:20px}
input,button{padding:10px;margin:5px}
.card{background:#1e293b;padding:15px;border-radius:8px;margin-top:10px}
</style>
</head>
<body>

<h2>إضافة منتج</h2>
<input id="code" placeholder="كود">
<input id="name" placeholder="اسم">
<input id="price" placeholder="سعر">
<input id="stock" placeholder="مخزون">
<button onclick="add()">حفظ</button>

<h2>بحث</h2>
<input id="search" placeholder="كود">
<button onclick="find()">بحث</button>

<div id="result"></div>

<script type="module">
import { supabase } from "./supabaseClient.js";

async function add(){
  await supabase.from("products").insert({
    code:code.value,
    name:name.value,
    price:price.value,
    stock:stock.value
  });
  alert("تم الحفظ");
}

async function find(){
  const { data } = await supabase
    .from("products")
    .select("*")
    .eq("code",search.value)
    .single();

  if(!data){ result.innerText="مش موجود"; return; }

  result.innerHTML = `
    <div class="card">
      الاسم: ${data.name}<br>
      السعر: ${data.price}<br>
      المخزون: ${data.stock}
    </div>`;
}

window.add=add;
window.find=find;
</script>

</body>
</html>

